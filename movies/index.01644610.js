const e="movieFilter",t={title:function(e){return t=>i(t.innerText).includes(i(e))},year:function(e){return t=>parseInt(t.dataset.year)>e}};async function n(t){window.sessionStorage.setItem(e,JSON.stringify(t))}function r(){let t=window.sessionStorage.getItem(e);return JSON.parse(t)}function i(e){return e.normalize("NFC").trim().toLowerCase()}function o(){return document.getElementById("search")}function u(){let e=new FormData(o());return[...e.entries()]}function a([e,n]){return t[e](n)}function l(){var e;let t=u(),n=t.map(a);[...document.getElementById("movie-list").querySelectorAll("li")].forEach((e=e=>n.every(t=>t(e)),t=>t.style.display=e(t)?null:"none"))}!function(){let e=document.getElementById("year");e.max=new Date().getFullYear(),e.value=e.min;let t=e=>document.getElementById("year-value").textContent=e;t(e.min),e.addEventListener("input",e=>t(e.target.value))}(),function(){let e=o(),t=r();t&&(Object.entries(r()).forEach(([t,n])=>e.elements[t].value=n),l())}(),o().addEventListener("input",l),o().addEventListener("input",function(e,t=300){let n;return(...r)=>{clearTimeout(n),n=setTimeout(()=>e(...r),t)}}(function(){n(Object.fromEntries(u()))}));